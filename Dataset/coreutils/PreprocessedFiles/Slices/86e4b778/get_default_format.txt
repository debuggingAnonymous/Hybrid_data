get_default_format 

{

  static char format_buf[sizeof "%0.Lf" + 2 * INT_STRLEN_BOUND (int)];



  int prec = MAX (first.precision, step.precision);



  if (prec != INT_MAX && last.precision != INT_MAX)

    {

      if (equal_width)

	{

	  size_t first_width = first.width + (prec - first.precision);

	  size_t last_width = last.width + (prec - last.precision);

	  if (first.width <= first_width

	      && (last.width < last_width) == (prec < last.precision))

	    {

	      size_t width = MAX (first_width, last_width);

	      if (width <= INT_MAX)

		{

		  int w = width;

		  sprintf (format_buf, "%%0%d.%dLf", w, prec);

		  return format_buf;

		}

	    }

	}

      else

	{

	  sprintf (format_buf, "%%.%dLf", prec);

	  return format_buf;

	}

    }



  return "%Lg";

}

